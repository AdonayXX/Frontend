<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabla Pacientes</title>


</head>

<body>
    <div id="spinnerContainer">
        <div class="loader"></div>
    </div>

    <div class="fade-in">

        <div class=" row justify-content-between align-items-center border-bottom m-2 p-2">
            <div class="col text-center">
                <br>
                <h1 class="text-wrap">Catálogo de Pacientes</h1>
            </div>

            <div class=" col-sm-3 search-bar input-group m-2">
                <span class="input-group-text" id="lupa">
                    <i class="bi bi-search"></i>
                </span>
                <input type="text" class="form-control" id="searchPatient" placeholder="Buscar...">
            </div>
        </div>
        <div class="d-flex justify-content-end mb-3">
            <button class="btn btn-secondary me-2 print" onclick="exportToPDF()" data-bs-toggle="tooltip"
                data-bs-placement="top" title="Imprimir">
                <img src="img/icons8-print.svg" alt="Print Icon">
            </button>
            <button class="btn btn-secondary me-2 pdf" onclick="exportToPDF()" data-bs-toggle="tooltip"
                data-bs-placement="top" title="Exportar a PDF">
                <img src="img/icons8-pdf.svg" alt="PDF Icon">
            </button>
            <button class="btn btn-secondary me-2 excel" onclick="exportToExcel()" data-bs-toggle="tooltip"
                data-bs-placement="top" title="Exportar a Excel">
                <img src="img/icons8-excel.svg" alt="Excel Icon">
            </button>
        </div>
        <div class="table-responsive-xxl mt-3">
            <table class=" table table-light table-striped table-hover table-bordered" id="tablePatient">
                <thead>
                    <tr>
                        <th class="text-center">Nombre Completo</th>
                        <th class="text-center">Tipo Identificación</th>


                        <th class="text-center">Identificación</th>
                        <th class="text-center">Genero</th>
                        <th class="text-center">Prioridad</th>
                        <th class="text-center">Teléfonos</th>

                        <th class="text-center">Trasladable</th>
                        <th class="text-center">Dirección</th>
                        <th class="text-center">Ubicación</th>

                        <th class="text-center">Acompañante</th>
                        <th class="text-center">Acciones</th>

                    </tr>
                </thead>
                <tbody id="patient-body">

                </tbody>
            </table>
        </div>



    </div>
    <div class="modal fade mt-5" id="showAccomp" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="background-color:#094079; color: white;">
                    <img src="img/LogoCCSS.png" class="img-fluid p-md-1" alt="" width="50px" height="50px">
                    <h5 class="modal-title" id="ausenteModalLabel" style="text-align: center;">Acompañantes</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="table-responsive-xxl mt-1" id="tableComp" style="display: none;">
                        <table class="table table-light table-striped table-hover table-bordered">
                            <thead>
                                <tr>
                                    <th>Identificación</th>
                                    <th>Nombre Completo</th>
                                    <th>Teléfonos</th>
                                    <th>Parentesco</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="accomp-tbody">
                                <!-- Aquí se llenará dinámicamente con datos -->
                            </tbody>
                        </table>
                    </div>

                    <div id="messageNoComp" class="text-center text-muted" style="display: none;">
                        No hay acompañantes registrados
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="modal fade mt-5" id="addAccomp" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg ">
            <div class="modal-content">
                <div class="modal-header" style="background-color:#094079; color: white;">
                    <img src="img/LogoCCSS.png" class="img-fluid p-md-1" alt="" width="50px" height="50px">
                    <h5 class="modal-title" id="ausenteModalLabel" style="text-align: center;">Datos Acompañante</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body mt-1">
                    <form action="" id="formEditComp" class="bg-light p-4 border rounded-3">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="identification" class="form-label">Identificación:</label>
                                <input type="text" id="identification" name="identification" class="form-control"
                                    maxlength="20" required>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="name" class="form-label">Nombre:</label>
                                <input type="text" id="name" name="Nombre" class="form-control" required maxlength="25">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="firstlastname" class="form-label">Primer Apellido:</label>
                                <input type="text" id="firstlastname" name="firstlastname" class="form-control "
                                    maxlength="25" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="secondlastname" class="form-label">Segundo Apellido:</label>
                                <input type="text" id="secondlastname" name="secondlastname" class="form-control"
                                    maxlength="25" required>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="phone1" class="form-label">Telefono 1:</label>
                                <input type="number" id="phone1" name="phone1" class="form-control" required>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="phone2" class="form-label">Telefono 2:</label>
                                <input type="number" id="phone2" name="phone2" class="form-control"
                                    placeholder="(Opcional)" required>
                            </div>


                        </div>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="parentesco" class="form-label">Parentesco:</label>
                                <select id="parentesco" name="acompananteParentesco1" class="form-select" required>
                                    <option selected disabled value="">Seleccionar...</option>
                                    <option value="Hijo/a">Hijo/a</option>
                                    <option value="Padre">Padre</option>
                                    <option value="Madre">Madre</option>
                                    <option value="Esposa/o">Esposa/o</option>
                                    <option value="Hermano/a">Hermano/a</option>
                                    <option value="Abuelo/a">Abuelo/a</option>
                                    <option value="Tío/a">Tío/a</option>
                                    <option value="Primo/a">Primo/a</option>
                                    <option value="Sobrino/a">Sobrino/a</option>
                                    <option value="Cuñado/a">Cuñado/a</option>
                                    <option value="Otro">Otro</option>

                                </select>
                            </div>

                        </div>
                        <div class="row justify-content-end">
                            <div class="col-md-3 mt-3 ">
                                <button id="saveCompanient" type="button" class="btn btn-primary">Guardar</button>
                                <button id="saveChangesCompanion" style="display: none;" type="button"
                                    class="btn btn-success">Guardar Cambios</button>
                            </div>

                        </div>






                    </form>


                </div>


            </div>
        </div>
    </div>
    <div class="modal fade mt-5" id="confirmDeleteModal" data-bs-backdrop="static" data-bs-keyboard="false"
        tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog ">
            <div class="modal-content">
                <div class="modal-header" style="background-color:#094079; color: white;">
                    <img src="img/LogoCCSS.png" class="img-fluid p-md-1" alt="" width="50px" height="50px">
                    <h5 class="modal-title" id="ausenteModalLabel" style="text-align: center;">Confirmación de
                        Eliminación</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="bodyConfirm">
                        <!-- El contenido se actualizará dinámicamente -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" id="confirmDeleteBtn" class="btn btn-danger">Eliminar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade mt-5" id="editPatient" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header" style="background-color:#094079; color: white;">
                    <img src="img/LogoCCSS.png" class="img-fluid p-md-1" alt="" width="50px" height="50px">
                    <h5 class="modal-title" id="ausenteModalLabel" style="text-align: center;">Editar Paciente</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body" id="modalFormEdit">
                    <div class="container  fade-in" style="max-width: 1100px;">
                        <form id="formEditPatient" method="post" class="bg-light p-4 border rounded-3">

                            <div class="form-section">
                                <h2>Datos del paciente:</h2>
                                <div class="row">
                                    <!-- Tipo de Cedula -->
                                    <div class="col-md-4 mb-3">
                                        <label for="tipoIdentificacion" class="form-label"><i
                                                class="bi bi-card-list"></i> Tipo de
                                            Identificación:</label>
                                        <select required id="tipoIdentificacion" name="tipoIdentificacion"
                                            class="form-select">
                                            <option selected disabled value="">Seleccionar</option>
                                            <option value="Cédula de Identidad">Cédula de Identidad</option>
                                            <option value="Número de Asegurado">Número de Asegurado</option>
                                            <option value="Interno">Interno</option>
                                        </select>
                                    </div>
                                    <!-- Identificación -->
                                    <div class="col-md-4 mb-3">
                                        <label for="identificacion" class="form-label"><i class="bi bi-card-text"></i>
                                            Identificación:</label>
                                        <input required type="text" id="identificacion" name="identificacion"
                                            class="form-control" maxlength="20" inputmode="numeric">
                                    </div>
                                    <!-- Genero -->
                                    <div class="col-md-4 mb-3">
                                        <label for="genero" class="form-label"><i class="bi bi-gender-ambiguous"></i>
                                            Género:</label>
                                        <select required id="genero" name="genero" class="form-select">
                                            <option selected disabled value="">Seleccionar</option>
                                            <option value="Femenino">Femenino</option>
                                            <option value="Masculino">Masculino</option>
                                            <option value="No definido">No Definido</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="row">
                                    <!-- Nombre -->
                                    <div class="col-md-4 mb-3">
                                        <label for="nombre" class="form-label"><i class="bi bi-person"></i>
                                            Nombre:</label>
                                        <input required type="text" id="nombre" name="nombre" class="form-control"
                                            maxlength="25">
                                    </div>
                                    <!-- Apellido1 -->
                                    <div class="col-md-4 mb-3">
                                        <label for="primerApellido" class="form-label"><i
                                                class="bi bi-person-badge"></i> Primer
                                            Apellido:</label>
                                        <input required type="text" id="primerApellido" name="primerApellido"
                                            class="form-control" maxlength="20">
                                    </div>
                                    <!-- Apellido2 -->
                                    <div class="col-md-4 mb-3">
                                        <label for="segundoApellido" class="form-label"><i
                                                class="bi bi-person-badge"></i> Segundo
                                            Apellido:</label>
                                        <input required type="text" id="segundoApellido" name="segundoApellido"
                                            class="form-control" maxlength="20">
                                    </div>
                                </div>
                                <div class="row">

                                    <!-- Telefono1 -->
                                    <div class="col-md-4 mb-3">
                                        <label for="telefono1" class="form-label"><i class="bi bi-telephone"></i>
                                            Teléfono 1:</label>
                                        <input type="text" id="telefono1" name="telefono1" class="form-control" required
                                            maxlength="8" inputmode="numeric">
                                        <input type="hidden" id="telefono1Hidden" name="telefono1Hidden" type="number">
                                    </div>
                                    <!-- Telefono2 -->
                                    <div class="col-md-4 mb-3">
                                        <label for="telefono2" class="form-label"><i class="bi bi-telephone"></i>
                                            Teléfono 2:</label>
                                        <input type="text" id="telefono2" name="telefono2" class="form-control"
                                            placeholder="Opcional" maxlength="8" inputmode="numeric">
                                        <input type="hidden" id="telefono2Hidden" name="telefono2Hidden" type="number">
                                    </div>
                                    <!-- <button onclick="printHiddenValues()">Imprimir Valores Ocultos</button> -->

                                    <!-- TipoSangre -->
                                    <div class="col-md-4 mb-3">
                                        <label for="tipoSangre" class="form-label"><i
                                                class="bi bi-gender-ambiguous"></i> Tipo de
                                            sangre:</label>
                                        <select required id="tipoSangre" name="tipoSangre" class="form-select">
                                            <option selected disabled value="">Seleccionar</option>
                                            <option value="A+">A+</option>
                                            <option value="A-">A-</option>
                                            <option value="B+">B+</option>
                                            <option value="B-">B-</option>
                                            <option value="AB+">AB+</option>
                                            <option value="AB-">AB-</option>
                                            <option value="O+">O+</option>
                                            <option value="O-">O-</option>
                                            <option value="N/A">No Definido</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="row">
                                    <!-- LugarSalida -->
                                    <div class="col-md-4 mb-3">
                                        <label for="lugarSalida" class="form-label"><i class="bi bi-geo-alt"></i> Lugar
                                            de
                                            salida:</label>
                                        <select required id="lugarSalida" name="lugarSalida" class="form-select">
                                            <option selected disabled value="">Seleccionar</option>
                                            <option value="Ruta">Ruta</option>
                                            <option value="Domicilio">Domicilio</option>
                                            <option value="Sede">Sede</option>
                                        </select>
                                    </div>

                                    <!-- Encamado -->
                                    <div class="col-md-4 mb-3">
                                        <label class="form-label"><i class="bi bi-bed"></i> Encamado:</label>
                                        <select required id="encamado" name="encamado" class="form-select">
                                            <option selected disabled value="">Seleccionar</option>
                                            <option value="temporal">Temporal</option>
                                            <option value="permante">Permanente</option>
                                            <option value="noRequerido">No requerido</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2 mb-3">
                                        <label class="form-label"><i class="bi bi-exclamation-circle"></i>
                                            Prioridad:</label><br>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="prioridad">
                                            <label class="form-check-label" for="prioridad">Si</label>
                                        </div>
                                    </div>
                                    <!-- Es trasladable -->
                                    <div class="col-md-2 mb-3">
                                        <label class="form-label"><i class="bi bi-truck"></i> Trasladable:</label><br>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="trasladable">
                                            <label class="form-check-label" for="trasladable">No</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <!-- Direccion -->
                                    <div class="mb-3">
                                        <label for="direccion" class="form-label"><i class="bi bi-house"></i>
                                            Dirección:</label>
                                        <textarea required id="direccion" name="direccion" class="form-control"
                                            maxlength="200"></textarea>
                                    </div>
                                </div>
                                <div class="row">
                                    <!-- Latitud -->
                                    <div class="col-md-4 mb-3">
                                        <label for="latitud" class="form-label"><i class="bi bi-house"></i>
                                            Latitud:</label>
                                        <input type="number" step="any" id="latitud" name="latitud" class="form-control"
                                            placeholder="Opcional" maxlength="25">
                                    </div>
                                    <!-- Longitud -->
                                    <div class="col-md-4 mb-3">
                                        <label for="longitud" class="form-label"><i class="bi bi-house"></i>
                                            Longitud:</label>
                                        <input type="number" step="any" id="longitud" name="longitud"
                                            class="form-control" placeholder="Opcional" maxlength="25">
                                    </div>
                                </div>
                            </div>
                            <div class="row justify-content-end">
                                <div class="col-md-4">
                                    <button type="button" class="btn btn-secondary m-2"
                                        data-bs-dismiss="modal">Cancelar</button>
                                    <button type="submit" id="confirmEditBtn" class="btn btn-primary m-2">Guardar
                                        Cambios</button>
                                </div>


                            </div>

                        </form>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <div class="modal fade mt-5" id="confirmDeleteModalComp" data-bs-backdrop="static" data-bs-keyboard="false"
        tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog ">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="staticBackdropLabel">Confirmación de Eliminación</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="bodyConfirmComp">
                        <!-- El contenido se actualizará dinámicamente -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" id="confirmDeleteBtnComp" class="btn btn-danger">Eliminar</button>
                </div>
            </div>
        </div>
    </div>


    <div data-script="js/patient.js"></div>
</body>

</html>